<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>–ú–∞–≥–∞–∑–∏–Ω</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
body{font-family:Arial;margin:0;background:#f4f6f8}
header{padding:12px;background:#fff;font-weight:700}
.tabs{display:flex;gap:10px;padding:10px;overflow:auto}
.tab{background:#e2e8f0;padding:8px 12px;border-radius:10px;cursor:pointer}
.tab.active{background:#cbd5e1;font-weight:700}
.grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;padding:10px;padding-bottom:260px}
.card{background:#fff;padding:10px;border-radius:12px}
.price{font-weight:bold;margin:6px 0}
.btn{width:100%;padding:10px;border:0;border-radius:10px;background:#3b82f6;color:#fff;margin-top:6px;cursor:pointer}
.pimg{width:100%;aspect-ratio:1/1;object-fit:contain;background:#f8fafc;border-radius:12px;border:1px solid #e5e7eb;margin-bottom:8px}
.cart{position:fixed;bottom:0;left:0;right:0;background:#fff;padding:10px;border-top:1px solid #ccc}
.small{font-size:12px;color:#64748b;margin-top:6px}
.cart-list{margin-top:8px;max-height:110px;overflow:auto;border:1px solid #e5e7eb;border-radius:12px;padding:8px;background:#f8fafc}
.cart-item{display:flex;justify-content:space-between;padding:6px 0;border-bottom:1px dashed #e5e7eb}
.ci-btn{width:34px;height:34px;border:0;border-radius:10px;cursor:pointer;background:#e2e8f0}
.ci-btn.del{background:#fee2e2}
.input{width:100%;padding:10px;margin-top:8px;border-radius:10px;border:1px solid #ccc}
.modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,0.6);display:none;align-items:center;justify-content:center;z-index:2000}
.modal{background:#fff;width:92%;max-width:380px;border-radius:16px;padding:16px}
</style>
</head>

<body>
<header>–ú–∞–≥–∞–∑–∏–Ω</header>

<div id="welcome" class="modal-backdrop" style="display:flex;z-index:2500;">
  <div class="modal" style="text-align:center;">
    <h3 id="welcomeText">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</h3>
    <p>–í—ã –≤ –º–∞–≥–∞–∑–∏–Ω–µ WAKA Nexa</p>
    <button class="btn" onclick="closeWelcome()">–ù–∞—á–∞—Ç—å –ø–æ–∫—É–ø–∫–∏</button>
  </div>
</div>

<div class="tabs" id="tabs">
  <div class="tab" data-cat="waka6000" onclick="load('waka6000')">WAKA 6000</div>
  <div class="tab" data-cat="waka8000" onclick="load('waka8000')">WAKA 8000</div>
  <div class="tab" data-cat="waka10000" onclick="load('waka10000')">WAKA 10000</div>
</div>

<div class="grid" id="products"></div>

<div class="cart">
  üõí <b><span id="count">0</span></b> ¬∑ –ò—Ç–æ–≥–æ: <b><span id="total">0</span> ‚Ç∏</b>
  <div class="cart-list" id="cartList"><div class="small">–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</div></div>
  <input id="address" class="input" placeholder="–í–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏">
  <button class="btn" onclick="checkout()">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
</div>

<script>
const tg = window.Telegram?.WebApp;
if (tg) tg.ready();

const data = {
  waka6000:["–ö–ª—É–±–Ω–∏–∫–∞ –≤–∏–Ω–æ–≥—Ä–∞–¥","–ì–∞–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤–∏—à–Ω—è –ª–∞–π–º","–ú—è—Ç–Ω–∞—è —á–µ—Ä–Ω–∏–∫–∞","–Ø–≥–æ–¥–Ω—ã–π –º–∏–∫—Å","–ö–∏—Å–ª–∞—è –∫–ª—É–±–Ω–∏–∫–∞","–í–∏–Ω–æ–≥—Ä–∞–¥–Ω—ã–π –º–æ—Ä—Å","–ß—É–ø—Å –∫–ª—É–±–Ω–∏–∫–∞ –º–∞–ª–∏–Ω–∞","–ê—Ä–±—É–∑–Ω–∞—è –∂–≤–∞—á–∫–∞"],
  waka8000:["–ê—Ä–±—É–∑","–ú—è—Ç–∞","–í–∏—à–Ω—è","–ß–µ—Ä–Ω–∏–∫–∞ –∫–ª—é–∫–≤–∞ –≤–∏—à–Ω—è","–°–∞–∫—É—Ä–∞ –≤–∏–Ω–æ–≥—Ä–∞–¥","–ö–ª—É–±–Ω–∏–∫–∞ –º–∞–ª–∏–Ω–∞","–õ–∏–º–æ–Ω–Ω–∞—è –∫–æ–ª–∞","–ú–æ—Ä—Å–∫–∞—è —Å–æ–ª—å –ª–∏–º–æ–Ω"],
  waka10000:["–ö–ª—É–±–Ω–∏–∫–∞ –±–∞–Ω–∞–Ω","–°–≤–µ–∂–∞—è –º—è—Ç–∞","–°–∞–∫—É—Ä–∞ –≤–∏–Ω–æ–≥—Ä–∞–¥","–ß–µ—Ä–Ω–∞—è –≤–∏—à–Ω—è","–ß–µ—Ä–Ω–∏–∫–∞ –∫–ª—é–∫–≤–∞ –≤–∏—à–Ω—è","–ñ–µ–≤–∞—Ç–µ–ª—å–Ω—ã–µ —Ä–µ–∑–∏–Ω–∫–∏","–ì–∞–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —è–≥–æ–¥–∞ –∫–∏—Å–ª–∞—è","–ú–∏—Å—Ç–µ—Ä –±–ª—é","–Ø–±–ª–æ—á–Ω—ã–π –≤–∑—Ä—ã–≤","–ê—Ä–±—É–∑","–í–∏–Ω–æ–≥—Ä–∞–¥ —è–±–ª–æ–∫–æ","–í–∏—à–Ω—ë–≤–æ —è–≥–æ–¥–Ω—ã–π –ª—ë–¥"]
};

const DEFAULT_IMG="img/placeholder.png";

const images={
"–ö–ª—É–±–Ω–∏–∫–∞ –≤–∏–Ω–æ–≥—Ä–∞–¥":"img/str-grape6.PNG",
"–ì–∞–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤–∏—à–Ω—è –ª–∞–π–º":"img/vish-lime6.PNG",
"–ú—è—Ç–Ω–∞—è —á–µ—Ä–Ω–∏–∫–∞":"img/blue-malina-vish10.PNG",
"–Ø–≥–æ–¥–Ω—ã–π –º–∏–∫—Å":"img/chern-klu-vish10.PNG",
"–ö–∏—Å–ª–∞—è –∫–ª—É–±–Ω–∏–∫–∞":"img/str-soda10.PNG",
"–í–∏–Ω–æ–≥—Ä–∞–¥–Ω—ã–π –º–æ—Ä—Å":"img/green-grape6.PNG",
"–ß—É–ø—Å –∫–ª—É–±–Ω–∏–∫–∞ –º–∞–ª–∏–Ω–∞":"img/str-mal6.PNG",
"–ê—Ä–±—É–∑–Ω–∞—è –∂–≤–∞—á–∫–∞":"img/watermelon6.PNG",
"–ê—Ä–±—É–∑":"img/watermelon10.PNG",
"–ú—è—Ç–∞":"img/myata10.PNG",
"–í–∏—à–Ω—è":"img/vishnya10.PNG",
"–ß–µ—Ä–Ω–∏–∫–∞ –∫–ª—é–∫–≤–∞ –≤–∏—à–Ω—è":"img/chern-klu-vish10.PNG",
"–°–∞–∫—É—Ä–∞ –≤–∏–Ω–æ–≥—Ä–∞–¥":"img/sakura-grape10.PNG",
"–ö–ª—É–±–Ω–∏–∫–∞ –º–∞–ª–∏–Ω–∞":"img/str-mal6.PNG",
"–õ–∏–º–æ–Ω–Ω–∞—è –∫–æ–ª–∞":"img/str-soda10.PNG",
"–ö–ª—É–±–Ω–∏–∫–∞ –±–∞–Ω–∞–Ω":"img/waka10Str-Banana.PNG",
"–°–≤–µ–∂–∞—è –º—è—Ç–∞":"img/myata10.PNG",
"–ß–µ—Ä–Ω–∞—è –≤–∏—à–Ω—è":"img/vishnya10.PNG",
"–ñ–µ–≤–∞—Ç–µ–ª—å–Ω—ã–µ —Ä–µ–∑–∏–Ω–∫–∏":"img/fruits10.PNG",
"–ì–∞–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —è–≥–æ–¥–∞ –∫–∏—Å–ª–∞—è":"img/str-soda10.PNG",
"–ú–∏—Å—Ç–µ—Ä –±–ª—é":"img/fruits10.PNG",
"–Ø–±–ª–æ—á–Ω—ã–π –≤–∑—Ä—ã–≤":"img/apple10.PNG",
"–í–∏–Ω–æ–≥—Ä–∞–¥ —è–±–ª–æ–∫–æ":"img/grape-apple10.PNG",
"–í–∏—à–Ω—ë–≤–æ —è–≥–æ–¥–Ω—ã–π –ª—ë–¥":"img/chern-klu-vish10.PNG"
};

function getImage(f){return images[f]||DEFAULT_IMG;}
function getPrice(c){if(c=="waka6000")return 9990;if(c=="waka8000")return 10990;return 12990;}

let cart={};

function updateCartUI(){
let items=Object.values(cart);
document.getElementById("count").innerText=items.reduce((s,i)=>s+i.qty,0);
document.getElementById("total").innerText=items.reduce((s,i)=>s+i.qty*i.price,0);
let list=document.getElementById("cartList");
if(!items.length){list.innerHTML="<div class='small'>–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</div>";return;}
list.innerHTML=items.map(i=>`<div class="cart-item"><div>${i.title} ‚Äî ${i.flavor}<br><span class="small">‚Ç∏${i.price} √ó ${i.qty}</span></div><div><button class="ci-btn" onclick="iQ('${i.key}',1)">+</button><button class="ci-btn" onclick="iQ('${i.key}',-1)">‚àí</button><button class="ci-btn del" onclick="rI('${i.key}')">‚úï</button></div></div>`).join("");
}
function iQ(k,d){cart[k].qty+=d;if(cart[k].qty<=0)delete cart[k];updateCartUI();}
function rI(k){delete cart[k];updateCartUI();}
function add(btn){let k=btn.dataset.key;if(cart[k])cart[k].qty++;else cart[k]={key:k,title:btn.dataset.title,flavor:btn.dataset.flavor,price:+btn.dataset.price,qty:1};updateCartUI();}

function load(cat){
document.querySelectorAll(".tab").forEach(t=>t.classList.toggle("active",t.dataset.cat===cat));
let box=document.getElementById("products");box.innerHTML="";
let price=getPrice(cat);let title="WAKA "+cat.replace("waka","");
data[cat].forEach((f,i)=>{
let key=cat+"-"+i;
box.innerHTML+=`<div class="card"><img class="pimg" src="${getImage(f)}" onerror="this.src='${DEFAULT_IMG}'"><div><b>${title}</b> ‚Äî ${f}</div><div class="price">‚Ç∏${price}</div><button class="btn" data-key="${key}" data-title="${title}" data-flavor="${f}" data-price="${price}" onclick="add(this)">–í –∫–æ—Ä–∑–∏–Ω—É</button></div>`;
});
}

function checkout(){
if(!tg)return alert("–û—Ç–∫—Ä–æ–π –≤ Telegram");
let items=Object.values(cart);
if(!items.length)return alert("–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞");
let addr=document.getElementById("address").value.trim();
if(addr.length<5)return alert("–í–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å");
tg.sendData(JSON.stringify({address:addr,items,total:items.reduce((s,i)=>s+i.qty*i.price,0)}));
tg.close();
}

load("waka6000");updateCartUI();
</script>
</body>
</html>
